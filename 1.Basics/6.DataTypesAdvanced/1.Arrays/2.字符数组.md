

&emsp;
# 5 字符数组
- 字符数组也叫字符序列，每个元素存放的是字符∶
>字符数组的声明
``` c++
char array[N];
```

&emsp;&emsp;系统会在字符串的有效内容的结尾处加一个 \0 空字符（null character）来表示字符结束，没有\0会一直打印后面的字符。




&emsp;
## 5.1 字符数组的初始化


>示例

```cpp
#include <iostream>
using namespace std;

int main() {
    char string1[] = {'H', 'e','l','l','o','\0'};
    char string2[] = {'H', 'e','l','l','o'};
    char string3[] = "Hello"; // 字符串常量初始化，自动加 \0
    cout << string1[5] << endl;
    cout << string2[5] << endl;
    cout << string3[5] << endl;
    cout << string1 << endl;
    cout << string2 << endl; // 没有结束符，会一直打印内存后面接着的char 
    cout << string3 << endl;

    return 0;
}
```


&emsp;
## 5.2 字符数组赋值
- 通常给字符序列赋值的方法是使用一些函数，例如 strcpy。strcpy（string copy）在函数库cstring（string.h）中被定义

>示例
```c++
#include <string.h>
#include <stdio.h>

int main() {

    char str1[10];
    char str2[20];
    str1[0] = 'H';
    str1[1] = 'e';
    str1[2] = 'l';
    str1[3] = 'l';
    str1[4] = 'o';
    str1[5] = '\0';
    strcpy(str2, "AAAA");

    printf("%s\n", str1);
    printf("%s\n", str2);
    return 0;
} 
```


通常 cin 与函数 getline 会一起使用给数组赋值
```c++
cin.getline(char buffer[], int length, char delimiter = '\n');
```

- buffer 用来存储输入的地址（例如一个数组名）
- length 是缓存 buffer 的最大容量
- delimiter 是用来判断用户输入结束的字符，它的默认值是换行符（'\n'）

>示例，通过cin输入字符数组
```c++
#include <iostream>
using namespace std;
 
int main() {
    char mybuffer[100];
    cout << "What's your name? ";
    cin.getline(mybuffer, 100);
    cout << "Hello " << mybuffer << ".\n";
    cout << "Which is your favourite team? ";
    cin.getline(mybuffer, 100);
    cout << "I like " << mybuffer << " too.\n";
    return 0;
}
```

注意，上面的例子中两次调用cin.getline时，我们都使用了同一个字符串标识（mybuffer）。程序在第二次调用时，新输入的内容将直接覆盖第一次输入 buffer 中的内容。

">>"符号可以直接从标准输入设备接收数据，也可以被用来输入字符串，例如，在上面的例子中，我们也可以用以下代码来读取用户输入∶
```c++
cin >> mybuffer;
```

但这种方法有以下局限性是 cin.getline 所没有的∶
- 它只能接收单独的词（而不能是完整的句子），因为这种方法以任何空白符为分隔符，包括空格（spaces）、跳跃符（tabulators）、换行符（newlines）和回车符（arriage returns）
- 它不能给 buffer 指定容量，这使得程序不稳定，如果用户输入超出数组长度，输入信息就会丢失。

所以建议在需要用 cin 来输入字符串时，使用 cin.getline 来代替 cin >>




&emsp;
# 8 字符串和其它数据类型的转换

如果一个字符串的内容是"1977"，这 5 个字符组成的序列并不容易转换为一个单独的整数。因此，函数库 cstdlib（stdlib.h）提供了以下 3个有用的函数。
```c++
atoi∶ 将字符串（string）转换为整型（int）
atol∶ 将字符串（string）转换为长整型（long）
atof: 将字符串（string）转换为浮点型（float）
```
这 3 个函数接收一个参数，返回一个指定类型的数据（int、long 或 float）。这 3 个函数与 cin.getline 一起使用来获得用户输入的数值，比传统的 cin>> 方法更可靠。

>示例，字符串转换
```c++
#include <iostream>
using namespace std;
 
#include <stdlib.h>

int main() {
    char mybuffer[100];
    float price;
    int quantity;
    cout << "Enter price: ";
    cin.getline(mybuffer, 100);
    price = atof(mybuffer);
    cout << "Enter quantity: ";
    cin.getline(mybuffer, 100);
    quantity = atoi(mybuffer);
    cout << "Total price: " << price*quantity;
    return 0;
}

```

